---
title: 输入_输出系统
date: 2024-10-15 13:56:04
categories:
  - note
  - 408
  - 计算机组成原理
tags: [计组]
index_img:
banner_img: /images/壁纸.jpg
---

## I/O系统基本概念（统考大纲删除）

### 输入/输出系统

### I/O控制方式

### 外部设备

## I/O接口

### I/O接口的功能

1. **进行地址译码和设备选择**：CPU 送来选择外设的地址码后，接口必须对地址进行译码以产生设备选择信息，使主机能和指定外设交换信息。
2. **实现主机和外设的通信联络控制**：解决主机与外设时序配合问题，协调不同工作速度的外设和主机之间交换信息，以保证整个计算机系统能统一、协调地工作。
3. **实现数据缓冲**：PU 与外设之间的速度往往不匹配，为消除速度差异，接口必须设置数据缓冲寄存器，用于数据的暂存，以避免因速度不一致而丢失数据。
4. **信号格式的转换**：外设与主机两者的电平、数据格式都可能存在差异，接口应提供主机与外设的信号格式的转换功能，如电平转换、并/串或串/并转换、模/数或数/模转换等。
5. **传送控制命令和状态信息**：CPU 要启动某外设时，通过接口中的命令寄存器向外设发出启动命令;外设准备就绪时，则将“准备好”状态信息送回接口中的状态寄存器，并反馈给 CPU。外设向 CPU 提出中断请求时，CPU 也应有相应的响应信号反馈给外设。

### I/O接口的基本结构

![I/O接口的通过结构](../../images/输入_输出系统/I_O接口的通用结构.png)

- 数据缓冲寄存器用来暂存与CPU或内存之间传送的数据信息；
- 状态寄存器用来记录接口和设备的状态信息；
- 控制寄存器用来保存CPU对外设的控制信息；
- 状态寄存器和控制寄存器在传送方向上是相反的，在访问时间上也是错开的，因此可将它们合二为一。

I/O接口的数据线上传输的内容：
&nbsp;&nbsp;&nbsp;&nbsp;I/O 接口中的**数据线**传送的是读/写数据、状态信息、控制信息和中断类型号。**地址线**传送的是要访问 I/O 接口中的寄存器的地址。**控制线**传送的是读/写控制信号，以确认是读寄存器还是写寄存器，此外控制线还会传送中断请求和响应信号、仲裁信号和握手信号。
> &nbsp;&nbsp;&nbsp;&nbsp;I/O 接口中的I/O控制逻辑还要能对控制寄存器中的命令字进行译码，并将译码得到的控制信号通过外设界面控制逻辑送到外设，同时将数据缓冲寄存器的数据发送到外设或从外设接收数据到数据缓冲寄存器。另外，它还要具有收集外设状态到状态寄存器的功能。

&nbsp;&nbsp;&nbsp;&nbsp;对数据缓冲寄存器、状态/控制寄存器的访问操作是通过相应的指令来完成的，通常称这类指令为 I/O 指令，IO 指令只能在操作系统内核的底层 1/0 软件中使用，它们是一种特权指令。

### I/O接口类型

按数据传输方式分：

1. 并行接口：一字节或一个字的所有位同时传送
2. 串行接口：一位一位地有序传送

> 接⼝要完成数据格式的转换
> 这⾥的数据传送⽅式是指外设和接⼝⼀侧的传送⽅式

按主机访问I/O设备的控制方式分：

1. 程序查询接口
2. 中断接口
3. DMA接口

按功能选择的灵活性分：

1. 可编程接口
2. 不可编程接口

### I/O端口及其编址

&nbsp;&nbsp;&nbsp;&nbsp;I/O端口是指I/O接口电路中可被CPU直接访问的寄存器，主要有**数据端口**、**状态端口**和**控制端口**。I/O 端口要想能够被 CPU 访问,就必须要对各个端口进行编址,每个端口对应一个端口地址。

独立编址：
&nbsp;&nbsp;&nbsp;&nbsp;也称 I/O 映射方式,是指对所有的 I/O端口单独进行编址。I/O 端口的地址空间与主存地址空间是两个独立的地址空间，它们的范围可以重叠，相同地址可能属于不同的地址空间。因此需设置专门的 I/O 指令来表明访问的是I/O 地址空间，I/O 指令的地址码给出I/O端口号。
&nbsp;&nbsp;&nbsp;&nbsp;优点: I/O 端口数比主存单元数少得多，只需少量地址线，使得 I/O 端口译码简单，寻址速度更快。使用专用 I/O 指令，可使得程序更加清晰，便于理解和检查。
&nbsp;&nbsp;&nbsp;&nbsp;缺点:I/O 指令少，只提供简单的传输操作，所以程序设计的灵活性较差。此外，CPU 需要提供存储器读/写、I/O 设备读/写两组控制信号，增大了控制的复杂性。

统一编址：
&nbsp;&nbsp;&nbsp;&nbsp;也称存储器映射方式，是指把主存地址空间分出一部分给 /0 端口进行编址，I/O端口和主存单元在同一地址空间的不同分段中，根据地址范围就能区分访问的是 I/0 端口还是主存单元，因此无须设置专门的 I/O 指令，用统一的访存指令就可访问 I/O 端口。
&nbsp;&nbsp;&nbsp;&nbsp;优点:不需要专门的 IO 指令，使得 CPU 访问 I/0 的操作更加灵活和方便，还使端口有较大的编址空间。I/0访问的保护机制可由虚拟存储管理系统来实现，无须专门设置。
&nbsp;&nbsp;&nbsp;&nbsp;缺点:端口地址占用了部分主存地址空间，使主存可用容量变小。此外，由于在识别 10端口时全部地址线都需要参加译码，使得译码电路变得更复杂，降低了译码速度。
